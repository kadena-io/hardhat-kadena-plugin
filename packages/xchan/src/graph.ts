import {
    getBytes,
    BytesLike,
} from 'ethers';

import { ChainId } from './xchan';

// Compute shortest path matrix (from the digraph cabal package):
//
// The matrix could easily be further compacted by a factor of 4 by storing
// only the indexes in the adjacency lists of a vertex instead of the vertex
// itself. Indexes are within [0,4[ while vertexes are within [0,98[.
//
// cabal repl --build-depends bytestring --build-depends base16-bytestring
// :set -XTypeApplications -XOverloadedStrings -XFlexibleContexts -XImportQualifiedPost
// :m + *Data.Digraph
// import Data.Word
// import Data.ByteString qualified as B
// import Data.ByteString.Base16 qualified as B16
// import Data.HashMap.Strict qualified as HM
// import Data.Massiv.Array qualified as M
// spc = shortestPathCache d4k4
// FW.ShortestPathMatrix m = _spcMatrix spc
// fmap (B16.encode . M.toByteString) $ M.backpermuteM @M.B (M.size m) (\(x M.:. y) -> (_spcIndices spc HM.! x M.:. _spcIndices spc HM.! y)) $ M.map (\x -> fromIntegral @_ @Word8 $ _spcVertices spc HM.! (snd x)) m

// TODO we should probably store that in binary in a separate file
const d4k4ShortestPathMatrixRaw: BytesLike = "0x005b41311f3141415b5b415b5b41315b415b5b4141411f311f5b5b4131315b1f311f5b315b41415b4141415b5b1f414141311f41311f1f5b315b5b1f5b5b415b314131311f1f1f5b5b41414141313131311f5b1f1f415b5b41311f5b41413141411f1e013040301e40405a5a5a40405a5a305a40405a4040301e5a1e405a30301e5a1e30305a405a5a4040405a401e5a40403040401e1e305a1e5a301e5a5a5a5a40403030301e1e5a1e405a4040304030301e301e5a401e5a5a30405a1e403040301e405d4302214333433343432121435d5d43335d4321334333212133215d434333335d21332133335d43435d215d435d5d214343433321433321212121215d215d5d435d334333335d21215d5d435d4343333333212143212143215d4333215d43433343425c5c0332423242424220205c42425c5c3220424232203232205c2042423232205c20323232425c5c425c205c42205c424232424220203220202020205c5c5c5c4242323232205c5c20325c425c324232322020204242205c2032425c2042324232455f5f4504234523453545452323235f5f45355f4523354535352335455f454535355f23232335355f453523235f455f5f234545453523453535232323235f235f5f455f354535235f23235f5f45454545353535354545232345235f4535235f45455e44445e5e0522443444444422225e22445e5e3422444434343434225e4444443434225e22223434445e22345e225e44225e444434444422343422222222225e5e5e5e4444342234225e5e22445e4444344434344434224444225e2234445e22444425616161613706253925393725392537256161393761392537393937613939613939372561252525613725613725256161616125393939373739373725252525612561616161373761256125256161256139393725393739392525392561253725616024606036606007243836383824362460243860603624383836363838606038383824362460242436606024243660246060246038383638383636362424242424606060606036362460246060242460386036383824383624383824602436246024273b27555555552b08273b273b2b3b2b272b2755553b2b553b27553b552b553b3b553b3b2b27552727273b2b27552b272755555555273b3b2b552b3b2b2b27272b27552755553b2b2b2b2b27552727555527553b2755273b2b3b3b27273b27552b2b3a26542654542a545409263a2a3a2a3a2a2654263a54542a263a3a542a543a54543a3a3a262a265426262a3a5426262a5426545426543a3a542a3a2a2a2a2626262a265454542a3a2a2a262a2654542626543a5454263a263a2a263a3a2654262a2a292d3d5729575757572d0a293d29573d292d292d2957573d2d573d572929572d573d3d573d3d2d2957293d3d3d2d29292d2929575757572957572d572d3d2d2d29292d295729573d3d2d2d2d29295729295757292d2d2957293d2d3d3d29293d29572c28563c562856562c56560b283c3c562c282c2856283c56562c563c28282c563c56563c3c3c282c28563c3c2c3c2828282c5628565628565656562c3c2c2c2c2828282c28563c562c3c2c2c28282856562828562c2c56283c283c2c283c3c2856283f2f1d2f3f5959595959592f0c593f59592f2f2f1d2f1d59593f2f59591d2f1d592f593f2f593f3f2f2f591d3f3f3f2f1d592f1d1d595959591d59592f592f3f2f2f1d1d2f59592f593f3f2f2f2f2f1d591d1d5959592f2f1d592f3f2f3f3f1d1d2f2e3e2e1c583e585858582e581c0d583e2e582e2e2e1c581c3e58582e1c581c2e2e583e58582e3e3e2e2e1c583e3e2e3e1c1c1c2e581c58581c585858582e3e2e2e2e1c1c582e1c583e582e3e2e2e1c2e1c58581c58582e2e581c3e2e3e2e1c3e2e1c5e493f5e235e4923234923493f230e5e493f5e5e2323235e492323495e3f494923235e2323493f3f495e49493f495e3f495e235e5e232349234923234949493f5e495e5e5e2323233f493f49235e5e5e235e2349235e4923233f493f233f5e234949485f5f3e5f22224848224822223e220f3e483e5f22223e22224848223e5f48482222225f48223e3e5f484848483e3e3e5f485f22225f48224822222248483e48485f5f5f225f2222483e483e5f223e5f5f2248225f2222483e223e483e22225f48484125604b416025604b25414b2541254b10254b416041256025414b25416060414b6025256025254b414125604b4b414b60412560256060256025254b25254b4b4b41604b6060254b6025414b4141256060602560254b6060412525414b412541602524404a6161406124244a4a4040244a246111404a406124244024404a61404061614a242424614a24404061244a4a4a40406161246124246124614a2424244a4a404a616161614a2424614a4040406124616161244a24616124404024404a40242461274d4354544d435427544d274d4d4d27274d12544d4354542754435443434d5454434d5427275427274d5427274d4d4d434d43434354275454545427274d27274d4d4d43544d2754274d4d27434d434d275454435427274d27544d2727434d4327434c2655424c5555425526264c4c4c424c4c262613424c5555262655424242554c4255554c262626554c2626554c264c4c4c42424255425526555526554c2626264c4c424c4c5555264c26264c4c424c425526425526554c265526264c4226424c422629294f4f4556564f455629564f2945564f29294f14564f4556565656294f45454f5656454f4f292956292956562929294f4f454f45454556565656565629295629294f294f4556452956294f2929454f454f295629455629294529564f2929454f4528284e4e57444e5757445728284e5744284e4e282815444e575728574e284444574e44574e4e282828575728285728284e4e4e444444574457575757285757282828284e444e445757284e2828284e444e4457284428285744285728284e4428444e511d513951513958585139581d585858395851391d51165851395839581d51513939515858395151515851581d58581d1d58515139515839513958585858581d1d581d1d511d1d5858391d581d51511d3951393951393939581d1d395858511d1d391c5038505050593850595938591c1c5938383850501c1c17385038591c595050383859503859505059505950591c1c591c1c5050503838383850595959591c59591c1c1c1c50591c3859591c501c1c5050383838385038381c59381c59591c50381c1f5a531f535353533b5a5a533b5a5a3b5a5a3b5a533b1f53185a533b535a5a1f53533b3b535a5a3b53535a3b535a1f5a5a1f1f5353533b535353533b5a535a5a5a1f1f531f1f3b531f5a5a3b1f5a1f53531f3b531f3b533b3b3b5a1f53535a5a531f5b1e1e52525252525b3a525b5b3a3a5b5b5b3a3a3a52521e1e193a525b521e5b52523a3a5b523a5b52523a3a5b525b1e1e5b521e5252523a52523a52525b5b5b1e5b521e1e1e3a3a5b1e3a5b5b1e521e1e52523a3a1e3a523a3a1e5b52525b5b1e523d5c215c4721214721473d215c47473d5c5c2121215c472121471a5c474721215c2121473d3d475c5c3d3d475c3d475c215c5c212147474721214747473d5c475c5c5c2121473d473d47215c5c5c215c214721214721213d473d213d5c214747215c5d3c5d20204646204620203c465d3c463c5d20203c2020464620201b46462020205d46203c3c5d463c5d463c3c3c5d465d20205d46204646202046463c46465d5d5d205d4620463c463c5d203c5d5d204620202020463c203c463c20205d46465d20314e4e3117314e1717170d4e170d310d0d4e4e310d4e0d1717310d171c4e1731314e170d4e4e314e4e0d170d310d0d4e4e314e4e17174e4e174e0d170d170d174e0d314e4e17170d31314e0d0d314e31174e4e174e17174e0d170d31310d314e314e4f30304f3016164f16164f0c0c160c304f0c304f4f0c160c3016160c301d30164f300c164f4f4f300c4f0c160c304f0c304f4f4f16164f4f4f16160c160c160c0c4f4f30164f0c1630300c4f300c304f4f16164f164f4f16160c300c0c304f304f301901335050331933501919190150011933010150503333500119331950011e50193333500133505001015050190133010119503350503319501919500119011901333301335050191901013350010133503319333350501919500119013301013301001851323251321818511818510018000032510032515132180018320051321f32185132320051510000515100180032180032515151183218515118180018003200003251321851001832000051320032513218513218515118180032000000003203521b03355252351b35521b1b1b351b03033503035252353552031b0303520320351b35355203355252351b52521b033503031b523552523552521b1b52031b031b033535031b35521b1b03033503030335523535033552521b1b52031b033503035302021a53343453341a1a531a1a1a34020202345302345353341a02020202535321341a5334340253531a345353021a02341a023453535353341a53531a1a021a0234020234341a1a53021a3402020234023453023453341a53531a1a02340202020f0f05460f05370f46370f37460f050f370f0505370505464637054646460505460522370f3737460537460f370f46460f0537050546463737053746460f0f46050f050f053746370f37460f0f05053705050537050537053746460f0f46050f05370e0e4704040e0e363647360e0e470e040e36040404364704364747044747040404474723360e473636040e470e364747040e043647043647043647360e47470e0e040e0436043647360e0e47040e3604040436040404043647360e47470e0e04360448110711074811072b11482b112b074807112b1107112b070748482b11071111070748072407112b1111482b48112b11114811072b07074807112b2b2b484811110707110711482b482b112b481111072b2b0707072b07072b0711481111114807111049100649060610102a2a492a1049061006102a1006062a49062a49061010100606064910252a1010102a491049102a49100610062a490610062a2a492a10490610100610062a492a492a10104906102a2a06062a060606062a4910101049101006132d4a130913094a13092d134a2d4a2d094a09132d1309132d09094a13131309131309094a092609132d094a4a2d4a4a2d134a4a13092d09091309132d092d4a4a131309091309094a2d4a2d132d4a1313092d2d0913092d09092d09134a1313134a2c12124b12084b080812122c2c4b2c4b4b081208122c1208082c4b081212081212120808084b12272c124b082c4b4b4b122c4b4b0812082c12081208082c4b2c124b0812120808082c4b2c4b2c12124b08122c2c12082c080808082c4b1212124b124c2f152f4c1515150b4c150b2f4c0b4c4c2f0b4c0b15152f0b152f0b152f2f4c150b15152f4c4c0b284c2f0b0b4c4c2f4c4c1515154c150b0b150b150b152f0b2f4c4c15150b2f2f0b0b2f2f4c2f154c4c15150b154c0b150b2f2f0b2f4c2f4c4c152e4d2e14144d14144d0a0a144d2e4d0a2e4d4d0a140a2e14140a0a2e2e144d2e0a1414144d2e0a4d2e290a2e4d0a2e4d4d4d14144d140a14140a140a140a0a2e4d2e144d0a142e2e0a0a2e2e2e4d4d14144d0a144d14140a2e0a0a2e4d2e4d2e144d25253d3d0959252559093d255959253d252509093d3d095925093d5959595909093d59253d250925593d2a253d092559595925252509592559250959253d095959250909095959093d25092525092525590925590909253d0959253d3d09253d252524243c3c580824240858243c58583c24242408083c3c58080858583c585808583c082458243c24083c583c2b083c58245858242408242458245858083c2458082458080858080858243c2408082424240858582408083c2458083c24083c3c2424245b5b27273f3f0b5b27275b0b3f273f5b273f270b0b0b3f3f0b5b270b5b3f5b5b5b0b0b3f5b273f270b275b272c275b0b275b5b5b2727270b0b5b5b270b5b273f0b5b5b270b0b275b5b0b3f270b27270b27275b0b27270b0b273f0b5b273f3f0b273f5a5a26263e3e5a0a26260a5a263e5a3e3e260a260a0a3e3e5a0a0a5a3e5a5a5a0a5a3e0a265a263e260a265a3e2d0a5a5a265a5a26260a265a0a265a5a0a3e265a0a265a0a0a5a260a5a263e260a0a2626260a5a26260a0a3e265a0a3e260a3e3e2641295d5d292941410d5d29415d0d290d415d294129410d0d41410d5d0d295d415d5d5d0d0d415d414129410d41292e415d41295d5d5d29290d0d0d5d5d290d5d2941415d5d295d0d41415d4141290d29290d2929294129290d0d2941415d2941410d28405c5c282840405c0c40280c5c0c5c5c40402840280c0c40405c0c280c405c5c5c0c5c400c405c28400c402840282f405c5c285c5c28280c0c5c0c285c5c0c40285c40285c0c5c4040405c2840280c0c282828402828285c0c40285c4040285c405f01431d5f5f431d4343015f1d43015f1d01435f1d431d4301014343431d01015f435f5f010101435f011d1d4301430130434343435f5f5f5f1d0101015f5f1d015f1d43435f1d1d5f0101435f01431d011d1d4343011d431d1d01010143015f1d43005e1c425e5e1c4242425e001c1c5e00001c5e42421c1c1c000042421c420000425e5e5e00004200005e1c1c004200421c3142425e425e5e1c5e00005e001c5e5e00421c5e421c1c005e4200005e1c421c00421c5e42421c1c1c5e0042005e00421c1f616103451f6161451f4545036145456161610345611f451f0303036103451f0303614561616103614561611f1f450361033245450345610361611f03030361611f03611f4503456161610303616103451f031f1f4545031f451f1f036103450361601e02601e4460601e44444460024444606002606044441e021e020202601e440202446060600260446060601e1e024402601e330244604460021e60020260021e606002441e440260600260600202601e441e02441e0244441e1e1e600244026002055521555505392155553921393905053939215555053955213921055539550539210521553955550505395555552121210555213421390521390555552105050555552105550521053955555505215555053921055521393905213921210505213954045420045420385454203838380404383854200454543838200420385404542038200438545454040454385454202004202054383504383820540420540404540420545404200438045454045454200454203854043820043838202020040438203b3b0757235757073b2357573b23230707073b3b235723073b57233b5707073b57073b230723573b57573b073b57575723232307572336230757233b075757230707075757233b23072307075757570723575707233b0757233b3b07233b232307073a3a560656220656223a5656223a062206063a3a56220656563a3a2206563a060656223a22063a565656063a563a56562222062222563a3756063a2256062256060656062256223a2206060656560656562206563a2256063a22063a3a222222060617535335355353070735075317173507070735175307351753355335170717533553533507073535535317075353171735173507533507533853350707071717070707530735173507530707353517071735355335175307071753073553173507075216345252340652340652061616063406061634065216343452345206165216523434520606343452520616525216161634063434525206343906340606161606065206340634165206060634340616341652341634065216060652523434160606191947194737374747090937094747370909090937194709371947374747190919473747470909093737094719094747191937193709473709373a47370909091919090909473747190909470909373719091937090937194709091947094747193718181846364646360846360846083646080808081836084618363646464608184618463608460808363646080818464618181836083636463608363b08360808181808084608463608184608080836360818361808081836084618080846464636180b491b1b491b492b2b49490b0b2b492b492b2b0b0b0b2b1b491b2b1b2b2b49491b0b1b492b49492b0b0b492b0b491b0b49491b1b2b1b2b0b2b490b2b3c492b0b0b0b1b1b0b0b1b2b2b491b2b0b490b0b2b2b1b0b1b2b0b0b2b1b490b0b1b490b2b49480a1a1a1a482a48482a0a482a0a2a482a480a2a0a0a1a2a1a481a2a2a2a48480a1a481a482a2a480a0a2a48480a0a1a48481a1a1a2a0a2a482a2a0a2a3d0a2a0a0a1a1a0a0a2a1a482a2a1a480a0a0a2a2a0a1a2a1a0a0a1a2a0a481a0a0a48482a0d2d0d4b0f0f4b0f4b2d2d4b4b0d2d0f4b2d4b2d2d2d0d0d2d0f4b0f0d0d2d2d4b4b0f0d0f4b2d4b4b2d2d0d4b2d0d4b0f0d4b4b0f0f2d0f0d0d2d4b0d2d3e4b2d0d2d4b0f0f0f0d0f2d2d4b0f2d0d4b0d0d2d2d2d4b0f2d0d0f2d0f4b0d0f0f4b0d2c0c4a0c0e0e0e4a2c4a4a2c0c4a0e2c2c4a2c4a2c2c0c0c0e2c0e4a0c0c2c2c4a4a0c0e4a0e4a2c2c4a0c2c2c4a4a0c0c0e4a4a0e0e0e2c0c0c4a2c2c0c2c3f0c2c4a2c0e0e0c0e2c0e4a2c2c0e4a0c0c0c2c2c4a2c2c0e0e0c0e2c0c4a0e0e0c4a4d01012f014d111111114d2f2f4d4d112f114d2f4d2f2f2f01012f11112f01112f2f4d4d1111114d2f4d2f112f014d2f014d11014d4d1111111101012f4d012f404d2f012f112f2f1101112f2f4d114d014d01014d012f4d112f01112f114d011111004c2e004c00101010102e4c4c2e104c102e2e4c2e4c2e2e0000102e2e1010002e2e4c4c10104c104c2e102e002e2e4c4c0000104c4c1010101000004c2e2e002e41002e102e2e2e00102e104c2e4c104c000000004c4c2e2e101000102e004c1010314f4f030331034f131313134f3131134f0331134f134f3131030303314f4f31031331314f4f1313134f1313311331034f31034f13034f4f4f03131303031313033142314f030303313113031331314f134f034f13134f0331311331031331134f034e30024e30024e0212121212304e1230124e1230124e304e023002024e30304e120230304e4e12124e12121212300230304e4e0202124e4e024e12120202121230024e43024e02023030021230124e304e124e021212024e4e4e301212021230024e513333515105153305511515155105053315511533155115513333051551335151330515333351511515515115153315330551330551150533055105151505051533333344330551050533331505153333511533510515155105333315330505331532505032045032145004141450140404143214501432145032500432501450323250140432325050141450501414143204323250500404140432045014140404321432325045500404043232041432145032321404501414045050503214040414323b3b1b1b1b22223b3b593b1b59593b22591b3b3b222259593b22591b5959593b1b22223b2259593b591b593b3b3b1b5959591b22221b3b225922223b1b592259591b1b1b22594622221b1b3b2222595959221b3b593b223b3b593b22591b22223b223a3a1a1a231a3a23583a1a3a1a58233a1a583a3a232358581a3a1a5858583a58231a3a2358233a581a583a583a3a581a5858231a1a23233a23583a23581a58231a581a1a58233a471a233a1a2323585823583a1a3a583a23583a233a1a582323233a5b243d3d0f0f2424243d3d5b3d0f5b0f24245b0f3d3d24245b5b3d0f5b0f5b5b5b3d0f24243d245b5b3d3d245b3d5b240f5b24240f24240f245b5b24243d0f5b245b5b0f0f0f0f3d4824240f0f2424245b5b5b243d240f3d243d3d5b3d240f0f2424255a3c3c0e0e25253c255a3c0e3c0e5a25250e5a3c3c25255a5a0e3c0e5a5a5a3c5a250e3c255a253c5a253c3c5a255a5a0e2525250e0e255a25255a3c255a0e5a250e5a0e0e3c0e3c490e25250e25255a5a255a253c3c0e3c255a3c253c0e0e25255d115d113f3f11111126263f3f5d3f115d1111265d113f3f26265d5d113f11115d5d5d3f1126263f115d26113f265d111126115d262611111111265d5d26263f115d265d5d115d26113f4a262611112626265d5d26263f26113f263f115d3f261111105c275c3e3e101027103e275c3e103e105c2710105c3e3e27275c5c3e1010105c5c3e5c27103e275c101027273e105c27105c102727101010105c27275c3e275c105c27105c275c3e103e4b1027271027275c5c2727273e3e103e275c10273e1010415f41135f2841411313412828415f5f41285f1341285f1341412828415f134113135f5f5f41132828414113281341285f411341135f28285f131313285f5f282841135f285f5f5f5f4113414c4128131328282813132828412813412841415f41285e401240295e40401212294040295e5e2940125e2940125e404040295e40401212125e5e405e29124029124012292940405e40125e122929125e12125e29295e40295e125e295e5e405e4012294d122929122929121229292940401240295e4029401c4343616115616143431515151c1c1c616143156115151c611543431c43436161431515616161431543616143151c15431c6143434315611c61611515151c6161151c4315611c1c6161614315434e1c1c151543431c15151c1c431c61431c434361421d604214606060424214141d14421d6060144214601d1414604242421d60424260141460604260421460601442141d1d42426042426014601d14601414601d1460421d60141d1d606042604214424f141d42141d4214141d1d1d424260421d6042171e1e454555451755554545171745451e45555545175517171e551717451e45455555455517555555451755555545171e17451e5545454517551e55551717171e5555171e4517451e1e555555451745501e1e174555451e55171e1e451e55451e451f16441f544416445454444416164444441f5454164416541f1616544416441f54444454165454544454541654541644161f1f44445444445416541f16541616541f1654441f44161f1f5454445444164451161f54441f4416541f1f1f444454441f19193920203939573919575739395719393920205757392057193920573919202039395757395719575739391957575739202019392057392039195720575719191920575720201919392020575757201939522020393957392057192020392057391818213838215638183856563838185638382121565621381856213838562118382156383856185656563838561856562138182121383856382156185621185618185621215618213818212156562156381838533821563821381856212121383856511212353551093512090912095135350909120912515135510909351251515135125135350909125112091212091212121251515135350935510912350909091251091251350909090909120912125135513535541235515109091212091235511213503413503434080813130850083434080808135013345008503408501350501334345008341308135013080813131350135050345008345034130808340808501313083450080808081308130850135034343408555034085013080813341313500b535314143737530b37140b0b140b3714370b0b140b37535337530b53141453535337145337370b0b14370b0b14140b1414145353535337533737530b14370b0b0b14530b143737370b0b0b0b140b1414533753531456143737530b0b53140b1437520a155236155236360a0a15150a360a36150a0a0a15523636520a52155252155252153636520a36150a0a36150a0a15151552155252365236525236150a0a360a0a5215150a36360a360a0a150a150a5215523615520a5736360a52520a0a1536150d1647474716162b2b470d2b160d470d0d2b2b2b0d16160d2b47472b0d164716164747472b16472b2b0d472b2b0d0d47160d1616164747472b16472b2b470d472b0d0d0d16472b472b2b2b0d0d0d0d162b161647162b4747580d2b2b470d47472b2b170c464617462a17462a2a0c0c170c462a0c2a2a170c0c17462a2a46170c174646174646172a2a460c2a2a460c2a170c0c17171746174646172a2a46462a460c0c2a17174617462a2a2a0c2a0c0c170c172a46172a17464617592a2a0c4646462a2a1801011849494918182d2d49012d492d4901012d2d2d0118180118492d0101184918184901492d18012d4949492d2d01014918011818184918492d18492d2d4901492d01010118492d492d2d2d01010101182d182d2d182d49495a01012d4901494900191900484819482c19482c2c002c4800482c002c2c190000194819002c1900194848194800192c2c0048482c48002c19000019191948194819192c2c48482c4800002c19194819482c2c2c002c00001900192c2c2c2c194848195b2c00004848484b2f1a03031a4b4b4b1a1a2f2f4b1a4b4b2f4b03032f1a2f1a031a03032f2f03031a4b1a2f4b034b2f2f1a4b4b4b4b2f2f03034b1a031a1a03031a4b2f1a4b2f2f4b034b2f032f1a1a4b2f4b2f2f03030303031a4b4b2f031a2f2f4b5c1a2f2f4b032e02021b1b024a4a1b4a2e1b4a2e4a1b2e4a024a2e022e1b021b021b2e02022e1b021b4a4a2e4a022e2e4a1b4a4a2e4a022e4a02021b1b1b02024a1b1b2e2e4a4a2e4a02022e1b2e4a1b4a2e2e2e020202021b024a4a022e2e1b4a2e025d2e2e024a314d4d310e050e0e4d4d4d0e0e310e050e4d4d314d0505310e310e0531314d313105050e4d0e314d4d4d0e0e0e4d4d4d4d313105050e0e0531050e050e4d050e4d31314d050e050e050e0e4d314d3131050505054d054d4d0e050e314d4d5e0e314d4c303004040f0f0f4c4c0f4c300f040f4c0f304c044c3004300f040f3030304c04300f040f4c4c304c4c0f0f4c0f4c4c304c04300f04040f0430040f4c0f0f04304c4c300f040f040f044c0f4c30303004040404044c4c4c040f300f4c4c045f4c301033334f4f33100707104f4f4f1010071007104f4f334f07073333334f4f33104f33330707104f10104f1007101010104f4f4f3333070710071033070707104f07104f33334f070707100710104f334f33330707334f4f070710100710334f10601032114e32324e061111064e4e114e061106114e11324e064e320632324e4e1132324e06321106114e4e11061111114e114e4e324e063211061106063206064e111106324e4e320606110611064e114e32323206064e32064e110606113211114e0661";

const d4k4ShortestPathMatrix: Uint8Array = getBytes(d4k4ShortestPathMatrixRaw)

export function d4k4ShortestPath(src: ChainId, trg: ChainId): ChainId[] {
    const m = d4k4ShortestPathMatrix;
    const order = Math.sqrt(m.length);
    const path: ChainId[] = [src]
    let cur = src;
    while (cur !== trg) {
        cur = d4k4ShortestPathMatrix[(cur * order) + trg] as ChainId;
        path.push(cur);
        // for d4k4
        if (path.length > 5) {
            throw new Error(`d4k4 shortest path exceeded max length of 5: ${path.join(' -> ')}`);
        }
    }
    return path;
}

